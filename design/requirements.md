# MurlokFury - 需求文档

> 版本: 1.0.0
> 日期: 2026-02-08

---

## 1. 产品概述

MurlokFury 是一个 WoW Midnight (12.0) 插件，在游戏内展示 murlok.io 网站上狂怒战士 M+ 的 Top 50 玩家统计聚合数据，帮助玩家快速查看当前版本的最优构建选择。

**数据来源**: https://murlok.io/warrior/fury/m+

**数据方式**: 离线预置 -- 由外部 Python 脚本抓取网页数据，转换为 Lua table 嵌入插件文件中。WoW 插件无法发起 HTTP 请求，因此所有数据在插件打包/更新时就已嵌入。

---

## 2. 用户故事

| # | 用户故事 | 优先级 |
|---|---------|--------|
| US-1 | 作为狂怒战士玩家，我想在游戏内通过 `/mf` 命令打开一个面板，快速查看 Top 50 M+ 玩家的天赋使用统计，以便参考最优天赋配置 | P0 |
| US-2 | 作为狂怒战士玩家，我想查看属性优先级（Haste/Mastery/Vers/Crit 的占比），以便优化我的装备属性 | P0 |
| US-3 | 作为狂怒战士玩家，我想查看 BiS 装备列表（按部位显示装备名称和使用人数），以便知道该追求哪些装备 | P0 |
| US-4 | 作为狂怒战士玩家，我想查看附魔推荐（按部位），以便正确选择附魔 | P0 |
| US-5 | 作为狂怒战士玩家，我想查看宝石推荐，以便正确镶嵌宝石 | P0 |
| US-6 | 作为狂怒战士玩家，我想查看种族统计分布，以便了解种族选择趋势 | P1 |
| US-7 | 作为玩家，我想看到数据更新时间戳，以便判断数据是否过时 | P0 |
| US-8 | 作为玩家，我想通过 Tab 切换不同数据类别（天赋/属性/装备/附魔/宝石/种族），避免信息过载 | P0 |

---

## 3. 功能清单与 L0/L1/L2 风险评估

| 功能 | 描述 | 风险等级 | 说明 |
|------|------|----------|------|
| 主面板框架 | 可拖拽、可缩放的主窗口 | **L0** | 纯 UI 布局 |
| Tab 导航 | 切换天赋/属性/装备/附魔/宝石/种族页面 | **L0** | 纯 UI 交互 |
| 天赋统计展示 | 显示职业天赋/专精天赋/英雄天赋使用率 | **L0** | 静态预置数据展示 |
| 属性优先级展示 | 显示 Haste/Mastery/Vers/Crit 占比 | **L0** | 静态预置数据展示 |
| BiS 装备列表 | 按部位显示装备名称和使用人数 | **L0** | 静态预置数据展示 |
| 附魔推荐 | 按部位显示附魔和使用人数 | **L0** | 静态预置数据展示 |
| 宝石推荐 | 按类型显示宝石和使用人数 | **L0** | 静态预置数据展示 |
| 种族统计 | 显示种族分布和人数 | **L0** | 静态预置数据展示 |
| Slash 命令 | `/mf` 或 `/murlokfury` 切换面板显示 | **L0** | 标准命令注册 |
| 数据时间戳 | 显示数据更新时间 | **L0** | 静态文本展示 |
| 位置记忆 | 记住面板位置（SavedVariables） | **L0** | 标准持久化 |
| 小地图按钮 | 可选的小地图入口按钮 | **L0** | 标准 UI 元素 |

**风险评估结论**: 所有功能均为 **L0**（纯外观/布局/静态数据展示），不涉及任何战斗数据读取、Secret Values 处理或战斗推理。数据完全是离线预置的参考信息，与游戏运行时状态无关。

---

## 4. 非目标（明确不做什么）

| # | 非目标 | 原因 |
|---|--------|------|
| NG-1 | 不做实时数据更新 | WoW 插件无法发起 HTTP 请求 |
| NG-2 | 不做天赋自动应用 | 属于 L2 行为，且超出展示插件范围 |
| NG-3 | 不做装备比较/评分 | 属于战斗推理（L2） |
| NG-4 | 不做当前角色与推荐的差异对比 | 需读取角色装备数据做分析，增加复杂度和风险 |
| NG-5 | 不做多专精/多职业支持 | v1.0 仅支持 Fury Warrior M+ |
| NG-6 | 不做物品链接点击预览 | 涉及 GameTooltip + item link 解析，v1.0 暂不做 |
| NG-7 | 不做 Raid/PvP 数据展示 | v1.0 仅限 M+ |
| NG-8 | 不做游戏内数据刷新按钮 | 数据通过外部脚本更新后重新打包 |

---

## 5. 数据流架构

```
[外部流程 -- 不在游戏内]

  murlok.io/warrior/fury/m+
        |
        v
  Python 脚本 (fetch_murlok.py)
  - requests 抓取 HTML
  - 解析天赋/装备/属性/附魔/宝石/种族
        |
        v
  Data/MurlokData.lua
  - Lua table 格式
  - 包含更新时间戳
  - 随插件一起打包分发

[游戏内流程]

  WoW 客户端加载插件
        |
        v
  ADDON_LOADED 事件
  - 加载 MurlokData.lua (预置数据)
  - 加载 SavedVariables (位置偏好)
        |
        v
  用户输入 /mf 命令
        |
        v
  主面板显示
  - Tab 导航切换不同数据视图
  - FontString 渲染静态文本/数据
  - ScrollFrame 处理长列表
```

---

## 6. UI 线框描述

### 6.1 主面板

```
+--[MurlokFury - Fury Warrior M+]--[X]--+
|                                         |
| [Talents] [Stats] [Gear] [Enchants]     |
| [Gems] [Races]                          |
|                                         |
| +-------------------------------------+ |
| |                                     | |
| |     (Tab 内容区域)                   | |
| |     ScrollFrame 包裹               | |
| |                                     | |
| |                                     | |
| +-------------------------------------+ |
|                                         |
| Data updated: 2026-02-08 12:00 UTC      |
+-----------------------------------------+
```

### 6.2 Talents Tab 示例

```
== Hero Talents ==
Mountain Thane    94% (47/50)  ████████████████░░
Slayer             6% (3/50)   █░░░░░░░░░░░░░░░░░

== Class Talents ==
(列出主要天赋节点及使用率)

== Spec Talents ==
(列出专精天赋节点及使用率)
```

### 6.3 Stats Tab 示例

```
== Secondary Stat Priority ==
Mastery    64%  ████████████████████
Haste      42%  █████████████░░░░░░░
Crit       19%  ██████░░░░░░░░░░░░░
Vers       16%  █████░░░░░░░░░░░░░░
```

### 6.4 Gear Tab 示例

```
== Best in Slot ==
Head:       Living Weapon's Faceshield     (32/50)
Neck:       Chrysalis of Sundered Souls    (20/50)
Shoulders:  Living Weapon's Ramparts       (47/50)
Back:       Reshii Wraps                   (50/50)
...
```

---

## 7. 技术约束

1. **Interface 版本**: 120000 (Midnight 12.0)
2. **无外部依赖**: 不使用 Ace3/LibStub 等库（保持简单）
3. **无 HTTP**: 所有数据预嵌入 Lua 文件
4. **SavedVariables**: 仅存储窗口位置和显示偏好
5. **性能**: 纯静态数据展示，无 OnUpdate 需求，对 FPS 影响为零
6. **合规**: 完全符合 Midnight 插件政策（全 L0，无战斗数据交互）
